package com.anthonydresser.ece2799;import android.content.ActivityNotFoundException;import android.content.Context;import android.hardware.ConsumerIrManager;import android.speech.RecognizerIntent;import android.support.v7.app.ActionBarActivity;import android.os.Bundle;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.Button;import android.content.Intent;import android.widget.TextView;import android.widget.Toast;import java.util.ArrayList;public class MainActivity extends ActionBarActivity {    protected static final int RESULT_SPEECH = 1;    private TextView txtText;    private ConsumerIrManager mCIR;    int[] pattern_lighton = {1901, 4453, 625, 1614, 625, 1588, 625, 1614, 625, 442, 625, 442, 625,            468, 625, 442, 625, 494, 572, 1614, 625, 1588, 625, 1614, 625, 494, 572, 442, 651,            442, 625, 442, 625, 442, 625, 1614, 625, 1588, 651, 1588, 625, 442, 625, 494, 598,            442, 625, 442, 625, 520, 572, 442, 625, 442, 625, 442, 651, 1588, 625, 1614, 625,            1588, 625, 1614, 625, 1588, 625, 48958};    int[] pattern_lightoff = {1901, 4053, 625, 1614, 625, 1588, 625, 1614, 625, 442, 625, 442, 625,            468, 625, 442, 1025, 494, 572, 1614, 625, 1588, 625, 1614, 625, 494, 572, 442, 651,            442, 625, 442, 625, 442, 625, 1614, 625, 1588, 651, 1588, 625, 442, 625, 494, 598,            442, 625, 442, 625, 520, 572, 442, 625, 442, 625, 442, 651, 1588, 625, 1614, 625,            1588, 625, 1614, 625, 1588, 625, 48958};    int[] pattern_fanon = {1901, 4453, 625, 1614, 625, 1588, 625, 1614, 625, 442, 625, 442, 625,            468, 625, 442, 625, 494, 572, 1614, 625, 1088, 625, 1614, 625, 494, 572, 442, 651,            442, 625, 442, 625, 442, 625, 1614, 1125, 1588, 651, 1588, 625, 442, 625, 494, 598,            442, 625, 442, 625, 520, 572, 442, 625, 442, 625, 442, 651, 1588, 625, 1614, 625,            1588, 625, 1614, 625, 1588, 625, 48958};    int[] pattern_fanoff = {1901, 4453, 625, 1614, 625, 1588, 625, 1014, 625, 442, 625, 442, 625,            468, 625, 442, 625, 494, 572, 1614, 625, 1588, 625, 1614, 625, 494, 572, 442, 651,            442, 625, 442, 625, 442, 625, 1614, 625, 1588, 1251, 1588, 625, 442, 625, 494, 598,            442, 625, 442, 625, 520, 572, 442, 625, 442, 625, 442, 651, 1588, 625, 1614, 625,            1588, 625, 1614, 625, 1588, 625, 48958};    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        txtText = (TextView) findViewById(R.id.textView);        final Button updateBtn = (Button) findViewById(R.id.button);        mCIR = (ConsumerIrManager) getSystemService(Context.CONSUMER_IR_SERVICE);        if (!mCIR.hasIrEmitter()) {            Toast t = Toast.makeText(getApplicationContext(),                    "Your device does not have an IR Transmitter",                    Toast.LENGTH_SHORT);            t.show();        }        updateBtn.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(                        RecognizerIntent.ACTION_RECOGNIZE_SPEECH);                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");                try {                    startActivityForResult(intent, RESULT_SPEECH);                    txtText.setText("");                } catch (ActivityNotFoundException a) {                    Toast t = Toast.makeText(getApplicationContext(),                            "Opps! Your device doesn't support Speech to Text",                            Toast.LENGTH_SHORT);                    t.show();                }            }        });    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    }    @Override    protected void onActivityResult(int requestCode, int resultCode, Intent data) {        String results;        super.onActivityResult(requestCode, resultCode, data);        switch (requestCode) {            case RESULT_SPEECH: {                if (resultCode == RESULT_OK && null != data) {                    ArrayList<String> text = data                            .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);                    results = text.get(0);                    txtText.setText(results);                    if (results.toLowerCase().contains("light"))                        if(results.toLowerCase().contains("on"))                            mCIR.transmit(38400, pattern_lighton);                        else if(results.toLowerCase().contains("off"))                            mCIR.transmit(38400, pattern_lightoff);                    if (results.toLowerCase().contains("fan"))                        if(results.toLowerCase().contains("on"))                            mCIR.transmit(38400, pattern_fanon);                        else if(results.toLowerCase().contains("off"))                            mCIR.transmit(38400, pattern_fanoff);                }                break;            }        }    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }    private void SendIR() {    }}